(window.webpackJsonp=window.webpackJsonp||[]).push([[45],{534:function(a,t,s){"use strict";s.r(t);var n=s(4),e=Object(n.a)({},(function(){var a=this,t=a.$createElement,s=a._self._c||t;return s("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[s("h2",{attrs:{id:"基础"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#基础"}},[a._v("#")]),a._v(" 基础")]),a._v(" "),s("h3",{attrs:{id:"cdnbye的p2p服务安全吗？"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#cdnbye的p2p服务安全吗？"}},[a._v("#")]),a._v(" CDNBye的P2P服务安全吗？")]),a._v(" "),s("p",[a._v("CDNBye采用的WebRTC data channel技术，是基于SCTP协议和TLS加密的，无需担心数据传输的\n安全问题。另外，与后台服务器的通信（包括tracker和信令服务器）是基于安全的HTTPS和WSS。隐私方面，CDNBye不会在服务器缓存任何视频内容相关的信息，视频地址也做了加密处理。")]),a._v(" "),s("h3",{attrs:{id:"使用cdnbye的p2p服务需要付费吗？"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#使用cdnbye的p2p服务需要付费吗？"}},[a._v("#")]),a._v(" 使用CDNBye的P2P服务需要付费吗？")]),a._v(" "),s("p",[a._v("目前CDNBye已经开始商业化，但同时对小型流媒体网站仍提供免费服务。收费模式如下：")]),a._v(" "),s("ul",[s("li",[a._v("只对在控制台(https://oms.cdnbye.com) 绑定的域名提供P2P服务")]),a._v(" "),s("li",[a._v("每个账号每日免费赠送5GB P2P流量，次日重置")]),a._v(" "),s("li",[a._v("每日在控制台完成签到后再赠送20GB P2P流量，次日清零")]),a._v(" "),s("li",[a._v("超出免费额度后停止P2P服务，如果继续使用，需要购买流量包，购买的流量包额度越大，价格越划算，且可以使用更多P2P流量，直到剩余可用流量为零。")]),a._v(" "),s("li",[a._v("目前只针对Web端插件收费，iOS和安卓SDK完全免费")])]),a._v(" "),s("h3",{attrs:{id:"如何购买流量包？"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#如何购买流量包？"}},[a._v("#")]),a._v(" 如何购买流量包？")]),a._v(" "),s("p",[a._v("登录"),s("code",[a._v("https://oms.cdnbye.com")]),a._v("，点击左边侧滑栏的"),s("code",[a._v("购买流量包")]),a._v("，目前支持支付宝和Paypal两种付款方式，其中支付宝以人民币付款，Paypal以美元付款。")]),a._v(" "),s("h3",{attrs:{id:"如果绑定了多个域名-appid，购买流量包后怎么扣费呢？"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#如果绑定了多个域名-appid，购买流量包后怎么扣费呢？"}},[a._v("#")]),a._v(" 如果绑定了多个域名/AppId，购买流量包后怎么扣费呢？")]),a._v(" "),s("p",[a._v("如果您在同一个账号同时绑定了多个域名/APP，则开启P2P的所有域名/APP会共享流量包。您可以在控制台的"),s("code",[a._v("P2P配置")]),a._v("关闭某个域名的P2P服务从而节省流量包消耗。")]),a._v(" "),s("h3",{attrs:{id:"购买了包月套餐后每日额度不够用怎么办？"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#购买了包月套餐后每日额度不够用怎么办？"}},[a._v("#")]),a._v(" 购买了包月套餐后每日额度不够用怎么办？")]),a._v(" "),s("p",[a._v("建议再买个流量包作为补充，系统会先扣除包月套餐流量，扣完再扣除流量包流量。")]),a._v(" "),s("h3",{attrs:{id:"p2p服务停止后会影响视频的正常播放吗？"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#p2p服务停止后会影响视频的正常播放吗？"}},[a._v("#")]),a._v(" P2P服务停止后会影响视频的正常播放吗？")]),a._v(" "),s("p",[a._v("不会。视频仍会正常播放，只是没有P2P加速效果。")]),a._v(" "),s("h3",{attrs:{id:"如何查看集成后有没有效果？"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#如何查看集成后有没有效果？"}},[a._v("#")]),a._v(" 如何查看集成后有没有效果？")]),a._v(" "),s("ul",[s("li",[a._v("确保已经打开2个以上播放同一个m3u8的客户端")]),a._v(" "),s("li",[a._v("确保按文档提供的步骤集成，并且SDK没有任何报错信息")]),a._v(" "),s("li",[a._v("打开控制台切换对应域名即可查看p2p流量")]),a._v(" "),s("li",[a._v("每个平台的SDK都会提供API来监听p2p流量等统计信息，请参考对应的文档说明")])]),a._v(" "),s("h3",{attrs:{id:"对接入p2p服务的网站-app有什么要求吗？"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#对接入p2p服务的网站-app有什么要求吗？"}},[a._v("#")]),a._v(" 对接入P2P服务的网站/APP有什么要求吗？")]),a._v(" "),s("p",[a._v("CDNBye不对色情等非法内容提供P2P服务，请确保您的网站/APP符合法律规范。")]),a._v(" "),s("h3",{attrs:{id:"cdnbye会不会造成用户视频播放延迟？"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#cdnbye会不会造成用户视频播放延迟？"}},[a._v("#")]),a._v(" CDNBye会不会造成用户视频播放延迟？")]),a._v(" "),s("p",[a._v("不会。首先，视频的首片数据总是从CDN下载的，因而不会造成首屏延迟。其次，如果在超时时间内无法从其他节点获取数据，那么内置的调度算法会及时切到CDN下载，因此本P2P技术不会带来任何额外的延迟。")]),a._v(" "),s("h3",{attrs:{id:"官方的信令服务好像高峰期不太稳定？"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#官方的信令服务好像高峰期不太稳定？"}},[a._v("#")]),a._v(" 官方的信令服务好像高峰期不太稳定？")]),a._v(" "),s("p",[a._v("建议不使用默认的信令服务，可以自行部署信令服务或者用第三方免费信令服务，请参考"),s("a",{attrs:{href:"/views/signaling"}},[a._v("这里")]),a._v("。")]),a._v(" "),s("h3",{attrs:{id:"使用过程中出现异常如何反馈？"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#使用过程中出现异常如何反馈？"}},[a._v("#")]),a._v(" 使用过程中出现异常如何反馈？")]),a._v(" "),s("p",[a._v("如果是Web端插件的异常请在p2p配置中开启log并截图浏览器console出错信息发送到service@cdnbye.com，或者在QQ群里反馈。如果是原生SDK出现异常请在p2p配置中开启log并保存日志文件发送到官方邮箱，建议在APP中集成"),s("a",{attrs:{href:"https://bugly.qq.com",target:"_blank",rel:"noopener noreferrer"}},[a._v("Bugly"),s("OutboundLink")],1),a._v("，有助于收集crash日志并上传到云端。")]),a._v(" "),s("h3",{attrs:{id:"如何在内网使用cdnbye？"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#如何在内网使用cdnbye？"}},[a._v("#")]),a._v(" 如何在内网使用CDNBye？")]),a._v(" "),s("p",[a._v("使用CDNBye的p2p服务需要调用两个云端服务，一个是Tracker调度服务，另一个是信令服务。")]),a._v(" "),s("h5",{attrs:{id:"信令服务"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#信令服务"}},[a._v("#")]),a._v(" 信令服务")]),a._v(" "),s("p",[a._v("可以直接在内网服务器上部署"),s("a",{attrs:{href:"https://github.com/cdnbye/cbsignal",target:"_blank",rel:"noopener noreferrer"}},[a._v("信令服务"),s("OutboundLink")],1),a._v("，信令不需要与外网通信。")]),a._v(" "),s("h5",{attrs:{id:"tracker服务"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#tracker服务"}},[a._v("#")]),a._v(" Tracker服务")]),a._v(" "),s("p",[a._v("Tracker需要通过能与外网通信的服务器进行转发，操作步骤如下：")]),a._v(" "),s("ul",[s("li",[a._v("在控制台绑定网站域名")]),a._v(" "),s("li",[a._v("联系CDNBye技术人员对转发域名进行授权")]),a._v(" "),s("li",[a._v("在服务器配置nginx内网转发，在conf.d增加tracker.conf，示例如下："),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("server "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n    listen "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("80")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n    listen "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("443")]),a._v(" ssl"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n    server_name YOUR_TRACKER_DOMAIN"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("          "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 配置内网转发域名")]),a._v("\n    access_log /root/log/access.log"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n    error_log /root/log/error.log"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# ssl on;")]),a._v("\n    ssl_certificate  tracker.pem"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("    "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 证书路径")]),a._v("\n    ssl_certificate_key tracker.key"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("  "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 证书秘钥路径")]),a._v("\n\n    location / "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n        proxy_pass https://tracker.cdnbye.com"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("      "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 转发到CDNBye的tracker服务")]),a._v("\n        proxy_set_header  Host  "),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$host")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n        proxy_set_header  X-Real-IP  "),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$remote_addr")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n        proxy_set_header  X-Forwarded-For "),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$remote_addr")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("  \n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])])]),a._v("同时在nginx.conf添加如下配置："),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("worker_rlimit_nofile "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("1000000")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("   "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 配置Nginx worker进程最大打开文件数")]),a._v("\nevents "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n    worker_connections "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("102400")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("  "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 单个进程允许的客户端最大连接数")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])])])]),a._v(" "),s("li",[a._v("修改前端代码，替换Tracker域名为转发域名")])]),a._v(" "),s("h3",{attrs:{id:"cdnbye的效果如何？如果使用过程效果不如预期，应该怎么调整？"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#cdnbye的效果如何？如果使用过程效果不如预期，应该怎么调整？"}},[a._v("#")]),a._v(" CDNBye的效果如何？如果使用过程效果不如预期，应该怎么调整？")]),a._v(" "),s("p",[a._v("如果您使用过程中无法达到预期效果，请参照"),s("a",{attrs:{href:"/views/m3u8"}},[a._v("P2P优化")]),a._v("对各参数进行调整，或者联系本平台获取技术支持。")]),a._v(" "),s("h3",{attrs:{id:"cdnbye的p2p技术会影响drm-数字版权管理-吗"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#cdnbye的p2p技术会影响drm-数字版权管理-吗"}},[a._v("#")]),a._v(" CDNBye的P2P技术会影响DRM(数字版权管理)吗?")]),a._v(" "),s("p",[a._v("不会。只有在用户获得发布者的服务器授权后才会激活P2P传输。而且，流秘钥是不会在P2P网络中\n传输的。P2P网络中传输的ts文件和用户从CDN下载的完全一样。另外，播放的内容不会上传或者缓存在我们的服务器中。")]),a._v(" "),s("h3",{attrs:{id:"平时在线人数不多有必要用p2p吗？"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#平时在线人数不多有必要用p2p吗？"}},[a._v("#")]),a._v(" 平时在线人数不多有必要用P2P吗？")]),a._v(" "),s("p",[a._v('有。P2P的独特优势是带宽"削峰"，平时在线人数不多的时候效果不明显，一旦在观看高峰期带宽突然大幅增长，随着在线人数增多P2P分享率指数式上升，可有效降低带宽峰值，避免由于带宽不足导致用户播放卡顿等问题。')]),a._v(" "),s("h2",{attrs:{id:"web-sdk"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#web-sdk"}},[a._v("#")]),a._v(" Web SDK")]),a._v(" "),s("h3",{attrs:{id:"web-sdk的原理是什么？"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#web-sdk的原理是什么？"}},[a._v("#")]),a._v(" Web SDK的原理是什么？")]),a._v(" "),s("p",[a._v("CDNBye采用WebRTC data channel技术和BT算法来实现直播和点播的P2P加速。通过内置的调度算法，\n在P2P和CDN之间进行无缝切换，从而在不影响用户播放体验的前提下最大化P2P率。hlsjs-p2p-engine\n是CDNBye为播放HLS流而开发的hls.js插件。目前，CDNBye已经支持大部分的HTML5播放器，包括\nHls.js, JWPlayer, Video.js, Clappr, Flowplayer和TCPlayer等。")]),a._v(" "),s("h3",{attrs:{id:"如果用户的浏览器不支持webrtc，会如何处理？"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#如果用户的浏览器不支持webrtc，会如何处理？"}},[a._v("#")]),a._v(" 如果用户的浏览器不支持WebRTC，会如何处理？")]),a._v(" "),s("p",[a._v("在这种情况下，插件不起任何作用，用户和往常一样采用HTTP方式下载。")]),a._v(" "),s("h3",{attrs:{id:"目前支持的移动端浏览器有哪些？"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#目前支持的移动端浏览器有哪些？"}},[a._v("#")]),a._v(" 目前支持的移动端浏览器有哪些？")]),a._v(" "),s("ul",[s("li",[a._v("QQ浏览器")]),a._v(" "),s("li",[a._v("谷歌浏览器"),s("br")]),a._v(" "),s("li",[a._v("火狐浏览器"),s("br")]),a._v(" "),s("li",[a._v("欧朋浏览器"),s("br")]),a._v(" "),s("li",[a._v("微信浏览器"),s("br")]),a._v(" "),s("li",[a._v("QQ内置浏览器"),s("br")]),a._v(" "),s("li",[a._v("猎豹浏览器"),s("br")]),a._v(" "),s("li",[a._v("搜狗浏览器")]),a._v(" "),s("li",[a._v("百度浏览器")]),a._v(" "),s("li",[a._v("360极速浏览器"),s("br")]),a._v(" "),s("li",[a._v("2345浏览器"),s("br")]),a._v(" "),s("li",[a._v("遨游5浏览器"),s("br")]),a._v(" "),s("li",[a._v("Via浏览器")]),a._v(" "),s("li",[a._v("X浏览器")]),a._v(" "),s("li",[a._v("先锋浏览器\n"),s("br"),a._v("\n注：以上所列出均是安卓平台，目前iOS平台还未支持，不断完善中...")])]),a._v(" "),s("h3",{attrs:{id:"某些移动端浏览器无法正常播放？"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#某些移动端浏览器无法正常播放？"}},[a._v("#")]),a._v(" 某些移动端浏览器无法正常播放？")]),a._v(" "),s("p",[a._v("目前已知安卓端浏览器不能播放的有:")]),a._v(" "),s("ul",[s("li",[a._v("百度APP内置浏览器\n"),s("br"),s("br"),a._v("\n可以通过"),s("code",[a._v("UserAgent")]),a._v("识别出这些浏览器，然后让原生播放器来接管播放，实例代码如下：")])]),a._v(" "),s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("if")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("navigator"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("userAgent"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("match")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token regex"}},[a._v("/iPad|iPhone|iPod|Baidu|UCBrowser/i")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// 采用原生浏览器播放")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("else")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// 采用CDNBye播放")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])])]),s("h3",{attrs:{id:"ios浏览器是否不支持p2p？"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ios浏览器是否不支持p2p？"}},[a._v("#")]),a._v(" iOS浏览器是否不支持P2P？")]),a._v(" "),s("p",[a._v("由于iOS的浏览器内核不支持MSE(Media Source Extension)，因此所有iOS系统的手机均不支持P2P，这也是其他Web P2P方案共同的局限性，建议使用原生APP集成iOS端SDK来实现P2P。")]),a._v(" "),s("h3",{attrs:{id:"web端插件p2p无效问题排查步骤"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#web端插件p2p无效问题排查步骤"}},[a._v("#")]),a._v(" Web端插件P2P无效问题排查步骤")]),a._v(" "),s("ul",[s("li",[a._v("同时打开2个以上网页播放同一个视频")]),a._v(" "),s("li",[a._v("视频播放后打开网页调试窗口查看debug信息")]),a._v(" "),s("li",[a._v("如果有红色的报错信息一般是代码逻辑问题，请根据提示修改")]),a._v(" "),s("li",[a._v('如果显示类似 "CDNBye 0.X.X is deprecated, please update to latest version(0.X.X已停止支持，请更新至最新版本)" 说明版本已过期，请升级至最新版')]),a._v(" "),s("li",[a._v("如果显示其它信息，请根据提示操作，有以下四种可能：\n"),s("ul",[s("li",[a._v("域名没有绑定，注意CDNBye后台是根据HTTP请求的Origin字段来获取域名的（如果使用iFrame该域名可能和网站域名不一致），请在后台绑定正确的域名")]),a._v(" "),s("li",[a._v("流量已经用完，请登录"),s("a",{attrs:{href:"https://oms.cdnbye.com",target:"_blank",rel:"noopener noreferrer"}},[a._v("控制台"),s("OutboundLink")],1),a._v("并切换到对应域名查看流量使用情况")]),a._v(" "),s("li",[a._v("在控制台的"),s("code",[a._v("P2P配置")]),a._v("中关闭了P2P服务，重新开启即可")]),a._v(" "),s("li",[a._v("域名被加入黑名单，登录控制台点击"),s("code",[a._v("域名信息")]),a._v("即可确认")])])])]),a._v(" "),s("h2",{attrs:{id:"客户端sdk"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#客户端sdk"}},[a._v("#")]),a._v(" 客户端SDK")]),a._v(" "),s("h3",{attrs:{id:"安卓sdk可以用于机顶盒吗？"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#安卓sdk可以用于机顶盒吗？"}},[a._v("#")]),a._v(" 安卓SDK可以用于机顶盒吗？")]),a._v(" "),s("p",[a._v("当然可以，只要是安卓5.0以上系统的机顶盒都支持。经过实测，exoplayer的兼容性最好，推荐采用。")]),a._v(" "),s("h3",{attrs:{id:"ios-sdk可以用于apple-tv吗？"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ios-sdk可以用于apple-tv吗？"}},[a._v("#")]),a._v(" iOS SDK可以用于APPLE TV吗？")]),a._v(" "),s("p",[a._v("暂时还不兼容APPLE TV。")]),a._v(" "),s("h3",{attrs:{id:"sdk除了-p2p-还有其他附加功能吗？"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#sdk除了-p2p-还有其他附加功能吗？"}},[a._v("#")]),a._v(" SDK除了 P2P 还有其他附加功能吗？")]),a._v(" "),s("p",[a._v("有的。SDK还具备智能缓存能力，用于避免文件重复下载问题，从而有效节省带宽消耗，而且本功能是完全免费的。")]),a._v(" "),s("h3",{attrs:{id:"客户端sdk-p2p无效问题排查步骤"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#客户端sdk-p2p无效问题排查步骤"}},[a._v("#")]),a._v(" 客户端SDK P2P无效问题排查步骤")]),a._v(" "),s("ul",[s("li",[a._v("iOS\n"),s("ul",[s("li",[a._v('在控制台搜索关键字"CDNBye warning"，根据对应的警告信息进行配置')]),a._v(" "),s("li",[a._v("如果仍然无法排查问题，请先将日志打印功能打开，示例代码如下：")])]),a._v(" "),s("div",{staticClass:"language-objective-c extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("CBP2pConfig *config = [CBP2pConfig defaultConfiguration];\nconfig.logLevel =  CBLogLevelDebug;\n[[CBP2pEngine sharedInstance] startWithToken:YOUR_TOKEN andP2pConfig:config];\n")])])]),s("ul",[s("li",[a._v("然后将日志信息保存到文件并发送给CDNBye技术人员")])])]),a._v(" "),s("li",[a._v("安卓\n"),s("ul",[s("li",[a._v("先打开日志打印功能，示例代码如下：")])]),a._v(" "),s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("P2pConfig")]),a._v(" config "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("new")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("P2pConfig")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Builder")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("logEnabled")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token boolean"}},[a._v("true")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("build")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("P2pEngine")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("initEngine")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" YOUR_TOKEN"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" config"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n")])])]),s("ul",[s("li",[a._v('在控制台搜索"CDNBye"，根据对应的警告信息进行配置')]),a._v(" "),s("li",[a._v("如果仍然无法排查问题，请先将日志级别调整为Debug，示例代码如下：")])]),a._v(" "),s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("P2pConfig")]),a._v(" config "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("new")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("P2pConfig")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Builder")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("logEnabled")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token boolean"}},[a._v("true")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("logLevel")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("LogLevel")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("DEBUG"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("build")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("P2pEngine")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("initEngine")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" YOUR_TOKEN"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" config"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n")])])]),s("ul",[s("li",[a._v("然后将日志信息保存到文件并发送给CDNBye技术人员")])])])]),a._v(" "),s("h3",{attrs:{id:"解决exoplayer无法播放问题"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#解决exoplayer无法播放问题"}},[a._v("#")]),a._v(" 解决Exoplayer无法播放问题")]),a._v(" "),s("p",[a._v("Exoplayer默认"),s("a",{attrs:{href:"https://github.com/google/ExoPlayer/issues/1190",target:"_blank",rel:"noopener noreferrer"}},[a._v("不支持跨协议重定向"),s("OutboundLink")],1),a._v("，因此需要在初始化时设置"),s("code",[a._v("allowCrossProtocolRedirects=true")]),a._v("，如以下示例：")]),a._v(" "),s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("DataSource")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Factory")]),a._v(" dataSourceFactory "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("new")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("DefaultHttpDataSourceFactory")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("\n            "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Util")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("getUserAgent")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"p2p-engine"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n            "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("DefaultHttpDataSource")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("DEFAULT_CONNECT_TIMEOUT_MILLIS"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n            "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("DefaultHttpDataSource")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("DEFAULT_READ_TIMEOUT_MILLIS"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n            "),s("span",{pre:!0,attrs:{class:"token boolean"}},[a._v("true")]),a._v("   "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("/* allowCrossProtocolRedirects */")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n")])])]),s("p",[a._v("具体用法可以参考"),s("a",{attrs:{href:"https://github.com/cdnbye/android-p2p-engine",target:"_blank",rel:"noopener noreferrer"}},[a._v("官方demo"),s("OutboundLink")],1),a._v("。")]),a._v(" "),s("h3",{attrs:{id:"解决安卓机顶盒oom问题"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#解决安卓机顶盒oom问题"}},[a._v("#")]),a._v(" 解决安卓机顶盒OOM问题")]),a._v(" "),s("p",[a._v("配置比较低的机顶盒容易出现OOM，可以通过配置提高堆内存大小，在"),s("code",[a._v("app/src/main")]),a._v("目录中的"),s("code",[a._v("AndroidManifest.xml")]),a._v("的"),s("code",[a._v("<application>")]),a._v("标签中直接插入：")]),a._v(" "),s("div",{staticClass:"language-xml extra-class"},[s("pre",{pre:!0,attrs:{class:"language-xml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("<")]),a._v("application")]),a._v("\n  "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("...")]),a._v("\n  "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[s("span",{pre:!0,attrs:{class:"token namespace"}},[a._v("android:")]),a._v("largeHeap")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),a._v("“true”")]),a._v("\n  "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("...")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("/>")])]),a._v("\n")])])]),s("h3",{attrs:{id:"如何减小apk体积"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#如何减小apk体积"}},[a._v("#")]),a._v(" 如何减小APK体积")]),a._v(" "),s("p",[a._v("由于依赖了第三方库WebRTC，使APK体积增大了不少。如果对APK体积比较敏感，可以通过以下2种方案压缩体积：")]),a._v(" "),s("ul",[s("li",[s("code",[a._v("abiFilters")]),a._v(" "),s("br"),a._v("编译系统的默认行为是将每个 ABI 的二进制文件包括在单个 APK（也称为胖 APK）内。与仅包含单个 ABI 的二进制文件的 APK 相比，胖 APK 要大得多；要权衡的是兼容性更广，但 APK 更大。要限制应用支持的 ABI 集，请使用 "),s("a",{attrs:{href:"https://developer.android.com/ndk/guides/abis",target:"_blank",rel:"noopener noreferrer"}},[a._v("abiFilters"),s("OutboundLink")],1),a._v("。")])]),a._v(" "),s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[a._v("android "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("...")]),a._v("\n    defaultConfig "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n        "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("...")]),a._v("\n        ndk "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n            abiFilters "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"armeabi-v7a"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"armeabi"')]),a._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])])]),s("ul",[s("li",[s("code",[a._v("APK 拆分")]),a._v(" "),s("br"),a._v("谷歌建议"),s("a",{attrs:{href:"https://developer.android.com/studio/build/configure-apk-splits#configure-abi-split",target:"_blank",rel:"noopener noreferrer"}},[a._v("针对不同CPU架构生成对应的APK"),s("OutboundLink")],1),a._v("：")])]),a._v(" "),s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[a._v("android "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n  "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("...")]),a._v("\n  splits "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// 根据ABI配置生成多APK")]),a._v("\n    abi "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n\n      "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// 是否根据不同ABI生成APK")]),a._v("\n      enable "),s("span",{pre:!0,attrs:{class:"token boolean"}},[a._v("true")]),a._v("\n\n      "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// 默认情况下所有ABI都包含了，因此需要调用reset()并且指定我们需要的CPU架构")]),a._v("\n\n      "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// 重置Gradle生成APK的ABI列表")]),a._v("\n      "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("reset")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n\n      "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// 指定CPU架构来生成我们需要的APK")]),a._v("\n      include "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"armeabi-v7a"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"arm64-v8a"')]),a._v("\n\n      "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// 设置不再生成一个包含所有ABI的APK")]),a._v("\n      universalApk "),s("span",{pre:!0,attrs:{class:"token boolean"}},[a._v("false")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])])])])}),[],!1,null,null,null);t.default=e.exports}}]);