(window.webpackJsonp=window.webpackJsonp||[]).push([[63],{527:function(t,a,s){"use strict";s.r(a);var e=s(4),r=Object(e.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h2",{attrs:{id:"简介"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#简介"}},[t._v("#")]),t._v(" 简介")]),t._v(" "),s("p",[t._v("m3u8的配置以及hls.js的配置对P2P效果会产生很大的影响，适当的配置（包括每个ts切片的时长和每个m3u8包含的切片数量等）可以显著提高P2P率。建议不要使用多码率m3u8。")]),t._v(" "),s("h2",{attrs:{id:"直播模式m3u8参考配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#直播模式m3u8参考配置"}},[t._v("#")]),t._v(" 直播模式m3u8参考配置")]),t._v(" "),s("ul",[s("li",[t._v("ts切片时长：不超过5秒")]),t._v(" "),s("li",[t._v("每个m3u8切片数量：不少于10个")])]),t._v(" "),s("h2",{attrs:{id:"允许http-range请求"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#允许http-range请求"}},[t._v("#")]),t._v(" 允许Http Range请求")]),t._v(" "),s("p",[t._v("Http Range请求用于下载指定范围的数据，可以在一部分数据已用P2P下载的情况下，剩余部分用http下载补足。如果从对等端P2P下载速度较慢，那么在达到超时时间后，就可以把剩余数据交给http range请求下载，而不需要重新完整下载整个数据，从而节省CDN的带宽，下图阐述了不采用和采用Http Range的区别：\n"),s("br"),t._v(" "),s("img",{attrs:{width:"600",src:"https://cdnbye.oss-cn-beijing.aliyuncs.com/pic/http-range.png",alt:"http-range"}}),t._v(" "),s("br"),t._v("\n要启动Http Range请求，需要同时在源服务器和CDN开启OPTIONS和RANGE请求：")]),t._v(" "),s("h4",{attrs:{id:"options请求"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#options请求"}},[t._v("#")]),t._v(" OPTIONS请求")]),t._v(" "),s("p",[t._v("OPTIONS请求是浏览器在跨域情况下发起Range请求之前的预检请求，一般只需要配置服务器使Http头有以下响应：")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("Access-Control-Allow-Methods: GET, OPTIONS\n")])])]),s("h4",{attrs:{id:"range请求"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#range请求"}},[t._v("#")]),t._v(" RANGE请求")]),t._v(" "),s("p",[t._v("要开启RANGE请求，一般只需要配置服务器使Http头有以下响应：")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("Access-Control-Allow-Headers: Range\n")])])])])}),[],!1,null,null,null);a.default=r.exports}}]);